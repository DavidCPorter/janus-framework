---

# PLEASE NOTE: prior to loading these vars we inherit both start.py & inventory variables. r_modules/main.yml loads this file and 'module'/defaults/main.yml to inject all vars into the respective 'play'.

# ANSIBLE VARIABLE PRECEDENCE REMINDER
# If multiple variables of the same name are defined in different places, they win in a certain order, which is (in least to greatest precendence): ... ps - another reminder of ansible's lack of vision and simplicity.

#command line values (eg “-u user”) - LEAST
#role defaults [1]
#inventory file or script group vars [2]
#inventory group_vars/all [3] *USED*
#playbook group_vars/all [3]
#inventory group_vars/* [3] *USED*
#playbook group_vars/* [3]
#inventory file or script host vars [2]
#inventory host_vars/* [3]
#playbook host_vars/* [3] *USED*
#host facts / cached set_facts [4]
#play vars *USED*
#play vars_prompt
#play vars_files
#role vars (defined in role/vars/main.yml)
#block vars (only for tasks in block)
#task vars (only for the task)
#include_vars *USED*
#set_facts / registered vars
#role (and include_role) params
#include params
#extra vars (always win precedence) *USED* - GREATEST



### name of the oysta experiment
oysta_name: testing_solr_implementations



#### OYSTA VARIABLE LOADING

ui_local_data_dir: "{{SAPA_HOME}}/data_dir"

# defaults file for benchmark
ui_pyscript: traffic_gen.py
ui_pom_path: "{{home}}/solrclientserver"


# defaults file for solr
ui_solr_version: dporter_8_3
ui_solr_install_dir: "{{home}}/solr-{{ui_solr_version}}"
ui_solr_log_dir: "/var/solr/logs"
ui_solr_git_branch_name: "{{ui_solr_version}}"
ui_solr_home: "{{ui_solr_install_dir}}/solr/server/solr"
ui_solr_init_file: '{{module_root}}/templates/solr.in.sh'
ui_solr_log4j_props: "{{ui_solr_install_dir}}/solr/server/resources/log4j2.xml"
ui_solr_heap: 1 #GB
ui_solr_repo: https://github.com/DavidCPorter/lucene-solr.git
ui_solr_bin_exec: "{{ui_solr_install_dir}}/solr/bin/solr"
ui_chroot: "{{hosts_ui}}"
ui_solrconfig_xml_dest: "{{ui_solr_home}}/configsets/_default/conf/solrconfig.xml"

# defaults file for elastic
ui_es_version: 7.5.1
ui_es_version_download_dict:
  7.5.1: https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.5.1-linux-x86_64.tar.gz

ui_es_root_dir: "{{home}}/elasticsearch-{{ui_es_version}}"
ui_kibana_root_dir: "{{home}}/kibana"
ui_es_data_dir: /var/elasticsearch/data
ui_es_log_dir: /var/elasticsearch/log
ui_cache_percentage: "50%"
ui_metric_root_dir: "{{home}}/metricbeat"
ui_masters_override:
  - "{{node0}}"
  - "{{node1}}"


# defaults file for upload_data
ui_data_upload_dir: "{{home}}"
#collection_name: "reviews_rf{{replicas}}_s{{shards}}_clustersize{{clustersize}}"
#aws_dir_name: "{{ansible_subnet}}/reviews_rf{{replicas}}_s{{shards}}_clustersize{{clustersize}}"
ui_aws_dir_name: default
ui_nfs_root: /proj/uic-cs-edu-PG0/exp/solr8/datastore

# defaults file for zookeeper
ui_zoo_version: 3.5.5


# defaults file for cloud-env
ui_ramdisk_path: /dev/shm
ui_ptp_install_dir: '/users/{{ansible_user}}/linuxptp'
ui_cred_dir: "{{module_root}}/files/.aws"

# other
ui_heapsize: 1
ui_id_rsa_pub_path: /Users/dporter/.ssh/id_rsa.pub



# vars for indexing module
ui_shards: 2
#replicas is multiplied by #nodes in cluster (e.g. if replicas = 2 and nodes in search engine = 10, then number of replicas == 20)
ui_replicas: 1
ui_collection_name: "{{ui_shards}}_{{ui_replicas}}_index"
ui_shorter_data: true

# load vars
ui_http_closed_scripts_dir: "{{module_root}}/files"
ui_load_files:
  - benchstats.py
  - clparsing.py
  - testmodes.py
  - threadargs.py
  - traffic_gen.py
# temp
ui_load_duration: 10
ui_l_replicas: "{{ui_replicas}}"
ui_l_shards: "{{ui_shards}}"
ui_l_query: roundrobin
ui_l_loop: closed
ui_l_solrnum: 2
#use 'default' as default engine
ui_engine: solr
# following unnecessary yet required 4.3.2020
ui_l_threads: 1
ui_l_procs: 16
ui_l_instances: 0


#pipeline
ui_output_dir: "{{home}}/traffic_gen"
ui_deploy_name: "{{ui_engine}}-{{ui_l_query}}-{{ui_l_replicas}}-{{ui_l_shards}}"




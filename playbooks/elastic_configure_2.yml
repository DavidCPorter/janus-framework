# playbook

- hosts: masterNodes:!thirdMaster
  roles:
    - elastic
  vars:
    cache_percentage_of_heap: "{{cache_percentage}}"
    master_flag: true
    data_flag: true
    discovery_nodes: "{{discovery_nodes_override}}"
    cluster_name: twoNode
  tags:
    - main

- hosts: singleGenerator
  tasks:
    - name: include tasks download_json
      include_tasks:
        file: roles/elastic/tasks/download_json.yml
  tags:
    - load_json
    - never



- hosts: singleGenerator
  tasks:
    - name: include tasks run indexing
      include_tasks:
        file: roles/elastic/tasks/do_index.yml
        apply:
          vars:
            replicas: 2
            shards: 1
            hostname: "{{node0}}"
  tags:
    - run_script
    - never


  # tags:
    # - start_masternodes
    # - never

# - hosts: thirdMaster
#   roles:
#     - elastic
#   vars:
#     master_flag: true
#     data_flag: false
#     discovery_nodes:
#       - "{{node0}}"
#       - "{{node1}}"
#     cluster_name: twoNode
